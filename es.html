<html ⚡=""
lang="es">

<head>             
  <meta charset="utf-8">
  <title>Coronavirus Map</title>
  <link rel="canonical" href="https://coronavirusviz.github.io">
  <link rel="alternative" hreflang="fr" href="https://coronavirusviz.github.io/es.html">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <meta name="amp-google-client-id-api" content="googleanalytics">
  <meta name="description" content="🌎  Mapa del Coronavirus: seguimiento del brote global: los casos confirmados del COVID-19. Fuente: Johns Hopkins ✔️">
  <link rel="shortcut icon" href="./img/icons/favicon.png">
  <meta property="og:url" content="https://coronavirusviz.github.io" />
  <meta property="og:title" content="Mapa interactivo de coronavirus global en tiempo real" />
  <meta property="og:description" content="coronavirusmap.pro es una visualización de datos geoespaciales de la pandemia del COVID-19." />
  <meta property="og:site_name" content="coronavirusmap.pro" />
  <meta property="og:image" content="https://miro.medium.com/max/1200/1*XGuHjsSa9Pq1Vyxa9FxP-A.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="800" />
  <meta property="og:image:height" content="800" />
  
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MMNMBLW');</script>
<!-- End Google Tag Manager -->
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-4226927036114056" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111035186-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111035186-3');
</script>

    <!--Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Spartan&display=swap" rel="stylesheet">

    <!--leaflet style-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin=""/>

    <!-- leaflet js. Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
            integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
            crossorigin=""></script>
    <!--sidebar style-->
    <link rel="stylesheet" href="assets/css/leaflet-sidebar.css" />
    <!--font awesome style-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- marker cluster styles-->
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.Default.css">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.css">
    <!-- bootstrap css-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--marker cluster javascript-->
    <script src="https://unpkg.com/leaflet.markercluster@1.0.4/dist/leaflet.markercluster.js"></script>
    <style>

        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        .leaflet-tooltip-pane .text {
            color:black;
            /*-webkit-text-stroke: 0.03em white;*/
            font-weight: bold;
            background: transparent;
            border:0;
            box-shadow: none;
            font-size: 1em;
        }

        /*/////////////////// Icon pulse ////////////////*/
        .fa-pulse {
            display: inline-block;
            -moz-animation: pulse 2s infinite linear;
            -o-animation: pulse 2s infinite linear;
            -webkit-animation: pulse 2s infinite linear;
            animation: pulse 2s infinite linear;
        }

        @-webkit-keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        @-moz-keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        @-o-keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        @-ms-keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        /*/////////////////End of Icon Pulse////////////////////*/
        .leaflet-popup-content {
            padding: 10px 10px 15px;
            margin: 0;
            line-height: inherit;
        }

        div.leaflet-popup-content-wrapper {
            background-color: rgb(252, 26, 113);
            color: white;
            font-size: 12px;
            font-family:'Ubuntu';
            border-radius: 3px;
            box-shadow: 0 1px 2px rgba(0,0,0,.1);
            padding: 1px;
            text-align: left;
            pointer-events: all;

        }
        .leaflet-sidebar-header {
            font-size: 15px;
        }
        /*This part is for avoiding overlap in sidebar and layer control in smaller
        screens  */
        @media (max-width: 769px) {
            .leaflet-sidebar-header {
                font-size: 13px;
            }
        }

        @media (max-width: 769px) {
            .leaflet-sidebar-content {
                opacity: 0.95 ;
            }
        }

        @media (max-width: 769px) {
            .leaflet-right .leaflet-control {
                margin-right: 60px;
            }
        }


        .leaflet-sidebar-header {
            background-color:rgb(247, 18, 75);


        }
        .leaflet-sidebar-header p{
            margin-bottom: 0px;
            margin-top: 0px;
        }
        .leaflet-sidebar-tabs > li.active, .leaflet-sidebar-tabs > ul > li.active {
            background-color:rgb(47, 60, 66);

        }

       
        .info {
            padding: 6px 8px;
            font-size: 13px;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }
        .legend {
            text-align: left;
            line-height: 30px;
            color: #555;
            width: auto;
        }
        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }
        .legend .colorcircle {
            border-radius: 50%;
            width: 15px;
            height: 15px;
            margin-top: 0px;
        }
        .legend .circlepadding {
            border-radius: 50%;
            margin-top: 0px;
            background: rgba(255, 255, 255, 0.8);
        }

        #container {
            height: 1800px;
        }

        .highcharts-data-table table {
            font-family: Verdana, sans-serif;
            border-collapse: collapse;
            border: 1px solid #EBEBEB;
            margin: 10px auto;
            text-align: center;
            width: 100%;
            max-width: 500px;
        }
        .highcharts-data-table caption {
            padding: 1em 0;
            font-size: 1.2em;
            color: #555;
        }
        .highcharts-data-table th {
            font-weight: 600;
            padding: 0.5em;
        }
        .highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
            padding: 0.5em;
        }
        .highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
            background: #f8f8f8;
        }
        .highcharts-data-table tr:hover {
            background: #f1f7ff;
        }

        .upperInfo {
            background: rgb(243, 238, 163);
            border-radius: 7px;

        }

        h5 {
            width:100%;
            margin-top:10px;
            font-family:'Ubuntu';
            padding:0.4em;
            
        }

        .firstEverInfo{

            background: rgb(241, 203, 159);
            border-radius: 7px;

        }

        .firstDeathsInfo{

            background: rgb(236, 135, 104);
            border-radius: 7px;

            }

        h6 {
            width:100%;
            margin-top:10px;
            font-family:'Ubuntu';
            padding:0.4em;
            
        }

        .percentConfirmed{

            background: rgb(241, 203, 159);
            border-radius: 7px;

            }

            .percentDeath{

            background: rgb(236, 135, 104);
            border-radius: 7px;

            }

        #sidebar > div.leaflet-sidebar-tabs > ul:nth-child(1) > li.active > a > span {
            margin-top: 10px;
        }
        #sidebar > div.leaflet-sidebar-tabs > ul:nth-child(1) > li:nth-child(1) > a > span {
            margin-top: 10px;
        }

        
        @media (max-width: 769px) {
            h6 {
                font-size: 15px;
            }
        }

        @media (max-width: 769px) {
            h5 {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MMNMBLW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- SIDEBAR STARTS HERE-->

<div id="sidebar" class="leaflet-sidebar collapsed">
    <!-- Nav tabs -->
    <div class="leaflet-sidebar-tabs">
        <ul role="tablist">
            <li><a href="#home" role="tab"><span class="fa fa-bars"></span></a></li>
            <li><a href="https://www.roqueleal.me" role="tab"><img src="images/favicon.png" style="width: 20px; height: 20px; margin-top: 10px;" alt="" /></i></a></li>
            <!-- <li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li> -->
        </ul>

        <!--<ul role="tablist">
            <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
        </ul> -->
    </div>

    <!-- Tab panes. -->
    <div class="leaflet-sidebar-content">
        <div class="leaflet-sidebar-pane" id="home">
            <p class="leaflet-sidebar-header">
                <ul class="list-unstyled list-social">
                         <li><a href="https://coronavirusviz.github.io">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                            width="30" height="30"
                            viewBox="0 0 48 48"
                            style=" fill:#000000;"><path fill="#ECEFF1" d="M1.998 10H45.998V37H1.998z"></path><path fill="#F44336" d="M2 10H46V13H2zM2 16H46V19H2zM2 22H46V25H2zM2 28H46V31H2zM2 34H46V37H2z">
                            </path><path fill="#3F51B5" d="M2 10H23V25H2z"></path><g><path fill="#FFF" d="M4.25 12L4.713 12.988 5.75 13.146 5 13.916 5.178 15 4.25 14.488 3.322 15 3.5 13.916 2.75 13.146 3.787 12.988zM8.25 12L8.713 12.988 9.75 13.146 9 13.916 9.178 15 8.25 14.488 7.322 15 7.5 13.916 6.75 13.146 7.787 12.988zM12.25 12L12.713 12.988 13.75 13.146 13 13.916 13.178 15 12.25 14.488 11.322 15 11.5 13.916 10.75 13.146 11.787 12.988zM16.25 12L16.713 12.988 17.75 13.146 17 13.916 17.178 15 16.25 14.488 15.322 15 15.5 13.916 14.75 13.146 15.787 12.988zM20 12L20.463 12.988 21.5 13.146 20.75 13.916 20.928 15 20 14.488 19.072 15 19.25 13.916 18.5 13.146 19.537 12.988zM4.25 20L4.713 20.988 5.75 21.146 5 21.916 5.178 23 4.25 22.488 3.322 23 3.5 21.916 2.75 21.146 3.787 20.988zM8.25 20L8.713 20.988 9.75 21.146 9 21.916 9.178 23 8.25 22.488 7.322 23 7.5 21.916 6.75 21.146 7.787 20.988zM12.25 20L12.713 20.988 13.75 21.146 13 21.916 13.178 23 12.25 22.488 11.322 23 11.5 21.916 10.75 21.146 11.787 20.988zM16.25 20L16.713 20.988 17.75 21.146 17 21.916 17.178 23 16.25 22.488 15.322 23 15.5 21.916 14.75 21.146 15.787 20.988zM20 20L20.463 20.988 21.5 21.146 20.75 21.916 20.928 23 20 22.488 19.072 23 19.25 21.916 18.5 21.146 19.537 20.988zM5.25 16L5.713 16.988 6.75 17.146 6 17.916 6.178 19 5.25 18.488 4.322 19 4.5 17.916 3.75 17.146 4.787 16.988zM9.25 16L9.713 16.988 10.75 17.146 10 17.916 10.178 19 9.25 18.488 8.322 19 8.5 17.916 7.75 17.146 8.787 16.988zM13.25 16L13.713 16.988 14.75 17.146 14 17.916 14.178 19 13.25 18.488 12.322 19 12.5 17.916 11.75 17.146 12.787 16.988zM17.25 16L17.713 16.988 18.75 17.146 18 17.916 18.178 19 17.25 18.488 16.322 19 16.5 17.916 15.75 17.146 16.787 16.988zM21 16L21.463 16.988 22.5 17.146 21.75 17.916 21.928 19 21 18.488 20.072 19 20.25 17.916 19.5 17.146 20.537 16.988z"></path></g></svg>
                        </li>
                    
                    </a>
                </li>
            </ul>
                <p ><b>Elaborado con tecnología Leaflet JS</b></p>
                <span class="leaflet-sidebar-close"><p class="fa-pulse">Cerrar</p></span>
            </p>

            <p class="lorem" style="margin-top:20px"><a href="https://roqueleal.me" target="_blank">
                Roque Leal</a>

            <h4 style="margin-bottom:10px; font-family:'Ubuntu',sans-serif; font-weight: bold;">Mapa Mundial del Coronavirus</br>(Actualizado Diariamente)</h4>

            
            <div class="firstEverInfo"> 

            <h6 id="firstCases"></h6>
            
            </div>

            <div class="percentConfirmed">

                <h6 id="topFive"></h6>

            </div>

            <div class="firstDeathsInfo">
                <h6 id="firstDeath"></h6>
            </div>
            

            <div class="percentDeath">

                <h6 id="topFiveDeath"></h6>

            </div>
            
            

                
    

            

            

            <p style="margin-top:30px; font-family:'Ubuntu', sans-serif; line-height: 20px" align=justify >Este mapa interactivo tiene como objetivo el seguimiento de la expansión mundial del nuevo Coronavirus (COVID-19) utilizando la tecnología de <a href="https://leafletjs.com/"target="_blank">Leaflet</a> inspirado en <a href="https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6"
                                                    target="_blank"> el Coronavirus Dashboard</a> elaborado por los investigadores del Johns Hopkins CSSE. <a href="https://github.com/CSSEGISandData/COVID-19" target="_blank">
                    Datos Actualizados diariamente</a> es tambien provisto por los investigadores de John Hopkin CSSE.</p>
            <p style="margin-top:30px; font-family:'Ubuntu', sans-serif; line-height: 20px" align=justify >Se presentan tres capas diferentes. Primero "Casos confirmados" muestra el número acumulado de individuos infectados en esos lugares. La segunda "Muertes" indica el número acumulado de muertes causadas por esta enfermedad. Por último, la capa "Recuperados" denota el número acumulado de personas que se recuperaron. </p>

            <div id="container" style="width:100%; height:3000px;"></div>
            <div id="container2" style="width:100%; height:1000px;"></div>
            <h1 style="margin-top:130px; font-family:'Ubuntu' ,sans-serif; font-size:10px; line-height: 10px" align=justify >
                Mapa del Coronavirus, Corona, COVID-19, Pandemia en Latinoamérica, Mapa de las Víctimas del COVID-19, Coronavirus Mapping, Infodeomología</h1>

        </div>

        <div class="leaflet-sidebar-pane" id="profile">
            <p class="leaflet-sidebar-header">Profile<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></p>
        </div>

        <div class="leaflet-sidebar-pane" id="messages">
            <p class="leaflet-sidebar-header">Messages<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></p>
        </div>

        <div class="leaflet-sidebar-pane" id="settings">
            <p class="leaflet-sidebar-header">Settings<span class="leaflet-sidebar-close"><i class="fa fa-caret-right"></i></span></p>
        </div>
    </div>
</div>
<div id='map'></div>
<!--Side bar javascript file-->
<script src="assets/js/leaflet-sidebar.js"></script>
<!--Highcharts-->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<!--Jquery-->
<script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
<!-- below is for bootstrap -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- for titling the layer groups-->
<script src="https://rawgithub.com/ismyrnow/Leaflet.groupedlayercontrol/master/src/leaflet.groupedlayercontrol.js"></script>
<!--Leaflet mapbox omnivore plugin for reading various formats including csv-->
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

<!--CSV parser Papa parse-->
<script src="assets/js/papaparse.min.js"></script>

<script>
    window.onload= function () {

    /*various options for the basemap*/
    var grayscale = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19
    });
    var CartoDB_DarkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19
    });

    var Stadia_AlidadeSmoothDark = L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png', {
        maxZoom: 20,
        attribution: '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
    });
    var CartoDB_Voyager = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19
    });
    var map = L.map('map', {
        zoom: 3,
        center: [4.828260,-73.916016],
        layers: [CartoDB_DarkMatter]

    });


    var myRenderer = L.canvas({ padding: 0.1 });
    /* Defining icons in different shapes and colors for different layers*/

    var smallMedium_icon = {
        radius: 10,
        fillColor: "#feb24c",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };


    var medium_icon = {
        radius: 14,
        fillColor: "#fc4e2a",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };

    var mediumLarge_icon = {
        radius: 18,
        fillColor: "#e31a1c",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };

    var large_icon = {
        radius: 22,
        fillColor: "#bd0026",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };


    var small_icon_d = {
        radius: 10,
        fillColor: "#fcc5c0",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };

    var medium_icon_d = {
        radius: 14,
        fillColor: "#f768a1",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };

    var large_icon_d = {
        radius: 18,
        fillColor: "#ae017e",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };


    var small_icon_r = {
        radius: 10,
        fillColor: "#7fcdbb",
        color: "000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };


    var medium_icon_r = {
        radius: 14,
        fillColor: "#1d91c0",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };

    var large_icon_r = {
        radius: 18,
        fillColor: "#225ea8",
        color: "#000",
        weight: 0.2,
        opacity: 1,
        fillOpacity: 0.8,
        renderer: myRenderer
    };
    /* end of marker style (icon) definitions*/

    /*utilizing date functionality in js
    in order to autmatically update data*/
    let d = new Date();
    let year=d.getFullYear();
    year=year-2000;
    let month=d.getMonth();
    month=month+1;
    let day=d.getDate();
    /*if current day's data has not been
    uploaded check yesterday. And if yesterday's data has also not been
    uploade check the day before yesterday (tDB_yesterday)*/
    let yesterday=day-1;
    let tDb_Yesterday=day-2;
    /*part below written to re-assign month, yesterday and tDb_Yesterday
    variable with new value if current day is the first day of the month*/
    function firstDayOfTheMonth(){
        if (day==1 && month==1){
            tDb_Yesterday=30;
            yesterday=31;
            month=12
        }
        else if (day==1 && month==2){
            tDb_Yesterday=30;
            yesterday=31;
            month=1
        }
        else if (day==1 && month==3){
            tDb_Yesterday=28;
            yesterday=29;
            month=2
        }
        else if (day==1 && month==4){
            tDb_Yesterday=30;
            yesterday=31;
            month=3
        }
        else if (day==1 && month==5){
            tDb_Yesterday=29;
            yesterday=30;
            month=4
        }
        else if (day==1 && month==6){
            tDb_Yesterday=30;
            yesterday=31;
            month=5
        }
        else if (day==1 && month==7){
            tDb_Yesterday=29;
            yesterday=30;
            month=6
        }
        else if (day==1 && month==8){
            tDb_Yesterday=30;
            yesterday=31;
            month=7
        }
        else if (day==1 && month==9){
            tDb_Yesterday=30;
            yesterday=31;
            month=8
        }
        else if (day==1 && month==10){
            tDb_Yesterday=29;
            yesterday=30;
            month=9
        }
        else if (day==1 && month==11){
            tDb_Yesterday=30;
            yesterday=31;
            month=10
        }
        else if (day==1 && month==12){
            tDb_Yesterday=29;
            yesterday=30;
            month=11
        }
    }
    /*call the function*/
    firstDayOfTheMonth();

    /* string arguments to be used in geojson templates before using them as arguments for
    csv omnivore plugin*/
    let todayString=month+"/"+day+"/"+year;
    let yesterdayString=month+"/"+yesterday+"/"+year;
    let tDb_yesterdayString=month+"/"+tDb_Yesterday+"/"+year;

    let country="Country/Region";

    /* first one, confirmed cases geojson custom layer*/
    let confirmedLayer = L.geoJson(null, {
        filter: function() {
            // no custom filter function but still keeping it
            return true;
        },
        /*points to the layer with the latest day's data from the csv*/
        pointToLayer (feature, layer) {
            if (feature.properties[todayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic"){
                if (feature.properties[todayString]<1000 && feature.properties[todayString]!=0 ){
                    return L.circleMarker(layer, smallMedium_icon)
                }
                else if (feature.properties[todayString]>=1000 && feature.properties[todayString]<5000){
                    return L.circleMarker(layer,medium_icon)
                }
                else if (feature.properties[todayString]>=5000 && feature.properties[todayString]<10000){
                    return L.circleMarker(layer,mediumLarge_icon)
                }
                else if (feature.properties[todayString]>=10000){
                    return L.circleMarker(layer,large_icon)
                }
            } else if (feature.properties[yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic") {
                if (feature.properties[yesterdayString]<1000 && feature.properties[yesterdayString]!=0 ){
                    return L.circleMarker(layer, smallMedium_icon)
                }
                else if (feature.properties[yesterdayString]>=1000 && feature.properties[yesterdayString]<5000){
                    return L.circleMarker(layer,medium_icon)
                }
                else if (feature.properties[yesterdayString]>=5000 && feature.properties[yesterdayString]<10000){
                    return L.circleMarker(layer,mediumLarge_icon)
                }
                else if (feature.properties[yesterdayString]>=10000){
                    return L.circleMarker(layer,large_icon)
                }
            }
            else if (feature.properties[tDb_yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic") {
                if (feature.properties[tDb_yesterdayString]<100 && feature.properties[tDb_yesterdayString]!=0){
                    return L.circleMarker(layer, smallMedium_icon)
                }
                else if (feature.properties[tDb_yesterdayString]>=1000 && feature.properties[tDb_yesterdayString]<5000){
                    return L.circleMarker(layer,medium_icon)
                }
                else if (feature.properties[tDb_yesterdayString]>=5000 && feature.properties[tDb_yesterdayString]<10000){
                    return L.circleMarker(layer,mediumLarge_icon)
                }
                else if (feature.properties[tDb_yesterdayString]>=10000){
                    return L.circleMarker(layer,large_icon)
                }

            }


        },
        onEachFeature (feature, layer) {
            /*popup content*/
            if (feature.properties[todayString]){
                var content =  "<b>País: </b>"+feature.properties[country]+"<b>Casos Confirmados: </b>"+feature.properties[todayString]+"<br>"+ "<b>Fecha: </b>"+[todayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[todayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else if (feature.properties[yesterdayString]){
                /*popup content*/
                var content =  "<b>País: </b>"+feature.properties[country]+"<br>"+ "<b>Casos Confirmados: </b>"+feature.properties[yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else {
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+"<br>"+ "<b>Casos Confirmados: </b>"+feature.properties[tDb_yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[tDb_yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[tDb_yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)
            }


        },


    });

    /*deaths custom geojson layer*/
    let deathsLayer = L.geoJson(null, {
        filter: function() {
            // no custom filter function but still keeping it
            return true;
        },

        pointToLayer (feature, layer) {
            /*points to the layer with the latest day's data from the csv*/
            if (feature.properties[todayString] &&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic"){
                if (feature.properties[todayString]<50 && feature.properties[todayString]!=0){
                    return L.circleMarker(layer, small_icon_d)
                }
                else if (feature.properties[todayString]>=50 && feature.properties[todayString]<500){
                    return L.circleMarker(layer,medium_icon_d)
                }
                else if (feature.properties[todayString]>=500){
                    return L.circleMarker(layer,large_icon_d)
                }
            } else if (feature.properties[yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic") {
                if (feature.properties[yesterdayString]<50 && feature.properties[yesterdayString]!=0 ){
                    return L.circleMarker(layer, small_icon_d)
                }
                else if (feature.properties[yesterdayString]>=50 && feature.properties[yesterdayString]<500){
                    return L.circleMarker(layer,medium_icon_d)
                }
                else if (feature.properties[yesterdayString]>=500){
                    return L.circleMarker(layer,large_icon_d)
                }
            }
            else if (feature.properties[tDb_yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic"){
                if (feature.properties[tDb_yesterdayString]<50 && feature.properties[tDb_yesterdayString]!=0 ){
                    return L.circleMarker(layer, small_icon_d)
                }
                else if (feature.properties[tDb_yesterdayString]>=50 && feature.properties[tDb_yesterdayString]<500){
                    return L.circleMarker(layer,medium_icon_d)
                }
                else if (feature.properties[tDb_yesterdayString]>=500){
                    return L.circleMarker(layer,large_icon_d)
                }

            }
        },
        onEachFeature (feature, layer) {
            /*popup content*/
            if (feature.properties[todayString]){
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+ "<b>Muertes: </b>"+feature.properties[todayString]+"<br>"+ "<b>Fecha: </b>"+[todayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[todayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else if (feature.properties[yesterdayString]){
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+ "<b>Muertes: </b>"+feature.properties[yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else {
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+ "<b>Muertes: </b>"+feature.properties[tDb_yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[tDb_yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[tDb_yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)
            }


        },

    });

    /*recovered, custom geojson layer*/
    let recoveredLayer= L.geoJson(null, {
        filter: function() {
            // no custom filter function but still keeping it
            return true;
        },

        pointToLayer (feature, layer) {
            /*points to the layer with the latest day's data from the csv*/
            if (feature.properties[todayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic"){
                if (feature.properties[todayString]<1000 && feature.properties[todayString]!=0){
                    return L.circleMarker(layer, small_icon_r)
                }
                else if (feature.properties[todayString]>=1000 && feature.properties[todayString]<2000){
                    return L.circleMarker(layer,medium_icon_r)
                }
                else if (feature.properties[todayString]>=2000){
                    return L.circleMarker(layer,large_icon_r)
                }
            } else if (feature.properties[yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic") {
                if (feature.properties[yesterdayString]<1000 && feature.properties[yesterdayString]!=0){
                    return L.circleMarker(layer, small_icon_r)
                }
                else if (feature.properties[yesterdayString]>=1000 && feature.properties[yesterdayString]<2000){
                    return L.circleMarker(layer,medium_icon_r)
                }
                else if (feature.properties[yesterdayString]>=2000){
                    return L.circleMarker(layer,large_icon_r)
                }
            }
            else if (feature.properties[tDb_yesterdayString]&&feature.properties[country]!="Iran (Islamic Republic of)" && feature.properties[country]!="Mainland China"&&feature.properties[country]!="Republic of Korea"&&feature.properties[country]!="Czech Republic") {
                if (feature.properties[tDb_yesterdayString]<1000 && feature.properties[tDb_yesterdayString]!=0){
                    return L.circleMarker(layer, small_icon_r)
                }
                else if (feature.properties[tDb_yesterdayString]>=1000 && feature.properties[tDb_yesterdayString]<2000){
                    return L.circleMarker(layer,medium_icon_r)
                }
                else if (feature.properties[tDb_yesterdayString]>=2000){
                    return L.circleMarker(layer,large_icon_r)
                }

            }
        },
        onEachFeature (feature, layer) {
            /*popup content*/
            if (feature.properties[todayString]){
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+"<b>Province/State: </b>"+feature.properties["Province/State"]+"<br>"+ "<b>Recuperados: </b>"+feature.properties[todayString]+"<br>"+ "<b>Fecha: </b>"+[todayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[todayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else if (feature.properties[yesterdayString]){
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+ "<b>Recuperados: </b>"+feature.properties[yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)

            }
            else {
                /*popup content*/
                var content =  "<b>País/Región: </b>"+feature.properties[country]+"<br>"+ "<b>Recuperados: </b>"+feature.properties[tDb_yesterdayString]+"<br>"+ "<b>Fecha: </b>"+[tDb_yesterdayString];
                layer.bindPopup(content,{closeButton: false, offset:L.point(0,-5) });
                /* for labels inside circles*/
                var text = L.tooltip({
                    permanent: true,
                    direction: 'center',
                    className: 'text'
                })
                    .setContent(feature.properties[tDb_yesterdayString])
                    .setLatLng(layer.getLatLng());
                layer.bindTooltip(text)
            }


        },

    });

    /*csv resources called and assigned to a variable*/
    let confirmed= omnivore.csv('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv',null,confirmedLayer);
    let deaths= omnivore.csv('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv',null,deathsLayer);
    let recovered= omnivore.csv('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv',null,recoveredLayer);

    confirmed.addTo(map);

    var baseLayers = {
        //not any baselayers

    };

    //grouping overlaying features
    var overlayElements = {
        "Coronavirus": {
            "Casos Confirmados": confirmed,
            "Muertes": deaths,
            "Recuperados": recovered

        }
    };

    var options = {
        // Make the "Coronavirus" group exclusive (to use radio inputs)
        exclusiveGroups: ["Coronavirus"],
        // Show a checkbox next to non-exclusive group labels for toggling all
        groupCheckboxes: true,
        collapsed: false
    };

    L.control.groupedLayers(baseLayers, overlayElements, options).addTo(map);

    //colors to be used as palette for coloring the legend of confirmed layers
    function getColorConfirmed(y) {
        return y ==500 ? '#bd0026' :
            y ==400 ? '#e31a1c' :
                y==300 ? '#fc4e2a' :
                    y==200 ? '#feb24c' :
                        '#D04030';

    }

    //colors to be used as palette for coloring the legend of deaths layer
    function getColorDeaths(y) {
        return y==300 ? '#ae017e' :
            y==200 ? '#f768a1' :
                y==100 ? '#fcc5c0' :
                    '#D04030';

    }

    //colors to be used as palette for coloring the legend of recovered layer
    function getColorRecovered(y) {
        return y==300 ? '#225ea8' :
            y==200 ? '#1d91c0' :
                y==100 ? '#7fcdbb' :
                    '#D04030';

    }


    //calculate radius so that resulting circles will be proportional by area
    function getRadius(y) {
        r = Math.sqrt(y / Math.PI);
        return r;
    }

    //defining legends
    var confirmedLegend= L.control({position: 'bottomleft'});

    var deathsLegend= L.control({position: 'bottomleft'});

    var recoveredLegend= L.control({position: 'bottomleft'});

    //creating all legends
    confirmedLegend.onAdd = function (map) {

        var div = L.DomUtil.create('div', 'info legend'),
            grades = [200, 300,400,500],
            labels2=[0,1000,5000,10000],
            labels = ['<strong>Leyenda</strong>', "Casos Confirmados"],
            from, to;
        //iterate through grades and create a color field and label for each
        for (var i = 0; i < grades.length; i++) {

            from = grades[i];
            to = grades[i + 1];

            labels.push( '<i class="circlepadding" style="width: '+Math.max(0,(40-1.8*getRadius(from)))+'px;"></i> <i style="background:'+ getColorConfirmed(from)+'; width: '+getRadius(from)*2+'px; height: '+getRadius(from)*2+'px; border-radius: 50%; margin-top: '+Math.max(0,(9-getRadius(from)))+'px;"></i> ' + labels2[i]+(labels2[i+1] ? '&ndash;' + labels2[i+1] : '+'));
        }
        div.innerHTML = labels.join('<br>');
        return div;
    };


    deathsLegend.onAdd = function (map) {

        var div = L.DomUtil.create('div', 'info legend'),
            grades = [100, 200, 300],
            labels2=[0,50,500],
            labels = ['<strong>Leyenda</strong>', "Muertes"],
            from, to;
        //iterate through grades and create a color field and label for each
        for (var i = 0; i < grades.length; i++) {

            from = grades[i];
            to = grades[i + 1];

            labels.push( '<i class="circlepadding" style="width: '+Math.max(0,(40-1.8*getRadius(from)))+'px;"></i> <i style="background:'+ getColorDeaths(from)+'; width: '+getRadius(from)*2+'px; height: '+getRadius(from)*2+'px; border-radius: 50%; margin-top: '+Math.max(0,(9-getRadius(from)))+'px;"></i> ' + labels2[i]+(labels2[i+1] ? '&ndash;' + labels2[i+1] : '+'));
        }
        div.innerHTML = labels.join('<br>');
        return div;



    };

    recoveredLegend.onAdd = function (map) {


        var div = L.DomUtil.create('div', 'info legend'),
            grades = [100, 200, 300],
            labels2=[0,1000,2000],
            labels = ['<strong>Leyenda</strong>', "Recuperados"],
            from, to;
//iterate through grades and create a color field and label for each
        for (var i = 0; i < grades.length; i++) {

            from = grades[i];
            to = grades[i + 1];

            labels.push( '<i class="circlepadding" style="width: '+Math.max(0,(40-1.8*getRadius(from)))+'px;"></i> <i style="background:'+ getColorRecovered(from)+'; width: '+getRadius(from)*2+'px; height: '+getRadius(from)*2+'px; border-radius: 50%; margin-top: '+Math.max(0,(9-getRadius(from)))+'px;"></i> ' + labels2[i]+(labels2[i+1] ? '&ndash;' + labels2[i+1] : '+'));
        }
        div.innerHTML = labels.join('<br>');
        return div;



    };

    //initally add first layer's legend on the main page
    confirmedLegend.addTo(map);

    //conditional add/remove of legends
    confirmed.beforeAdd = function (map) {
        confirmedLegend.addTo(map);
        deathsLegend.remove(map);
        recoveredLegend.remove(map);
    };
    deaths.beforeAdd = function (map) {
        deathsLegend.addTo(map);
        confirmedLegend.remove(map);
        recoveredLegend.remove(map);
    };

    recovered.beforeAdd=function(map){
        deathsLegend.remove(map);
        confirmedLegend.remove(map);
        recoveredLegend.addTo(map);
    };

    //adding the side bar
    var sidebar = L.control.sidebar({ container: 'sidebar', position: 'right' })
        .addTo(map)
        .open("home");

    //GRAPH, DATA OPERATIONS for Confirmed
    let worldTotal_Confirmed=0
    let confirmedLabels=[];
    let confirmedValues=[];
   
    let confirmedValues_OneDayAgo=[];
    //In order to find total cases in US,China,Canada and Australia
    let totalConfirmed_US=0;
    let totalConfirmed_China=0;
    let totalConfirmed_Canada=0;
    let totalConfirmed_Aus=0;
    //in order to find daily change %
    let totalConfirmed_US_OneDayAgo=0;
    let totalConfirmed_China_OneDayAgo=0;
    let totalConfirmed_Canada_OneDayAgo=0;
    let totalConfirmed_Aus_OneDayAgo=0;
    //putting confirmed cases into array format, into the empty arrays defined above
    Papa.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv", {
        download: true,
        complete: function(results) {
            //select the latest column
            let lastCol=results.data[1].length-1;
            //select the column before the latest to use its data in daily % change calc
            let last2Col=results.data[1].length-2;
            //find the row where country name is either "US","China","Canada" or "Australia"
            //and add the corresponding value to the total sum of that country
            for (i=1; i< results.data.length; i++) {
                if (results.data[i][1]=="US"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    totalConfirmed_US=totalConfirmed_US + nmbr
                    totalConfirmed_US_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="China"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    totalConfirmed_China=totalConfirmed_China + nmbr
                    totalConfirmed_China_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="Canada"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    totalConfirmed_Canada=totalConfirmed_Canada + nmbr
                    totalConfirmed_Canada_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="Australia"){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalConfirmed_Aus=totalConfirmed_Aus + nmbr
                    totalConfirmed_Aus_OneDayAgo+=nmbr_OneDayAgo
                }
                //except US,China,Canada and Australia. Push the country name to the labels list
                //and push the corresponding value to the values list
                else if (results.data[i][1]!="US" || results.data[i][1]!="Mainland China"|| results.data[i][1]!="China"
                    || results.data[i][1]!="Canada" || results.data[i][1]!="Australia" ){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    confirmedValues.push(nmbr);
                    confirmedLabels.push(results.data[i][1])
                    confirmedValues_OneDayAgo.push(nmbr_OneDayAgo)

                }
                else {
                    console.log("ERROR")
                }
            }
            confirmedLabels.push("US","China","Canada","Australia");
            confirmedValues.push(totalConfirmed_US,totalConfirmed_China, totalConfirmed_Canada, totalConfirmed_Aus);
            confirmedValues_OneDayAgo.push(totalConfirmed_US_OneDayAgo,totalConfirmed_China_OneDayAgo,totalConfirmed_Canada_OneDayAgo,totalConfirmed_Aus_OneDayAgo)


            //console.log(confirmedValues_OneDayAgo)
            //console.log(confirmedValues)
            let percentChangeDailyArray=[]
            //calculate daily change compared to data from the day before
            function DailyChange(){
            for (n = 0; n < confirmedValues.length; n++) {
                    let perc= Math.round((confirmedValues[n]-confirmedValues_OneDayAgo[n])*100/confirmedValues_OneDayAgo[n])
                    if (perc==Infinity) {
                        percentChangeDailyArray.push("First Case")
                    }
                    else {
                        percentChangeDailyArray.push(perc)
                    }
                    }
                }


            DailyChange();


            //console.log(percentChangeDailyArray)

            //zip values from both lists
            var zippedPercDailyChange = confirmedLabels.map(function(e, i) {
                return [e, percentChangeDailyArray[i]];
            });
            //sort descending percent change
            zippedPercDailyChange.sort(function(a,b){return b[1]-a[1];});
            //console.log(zipped)

             let newCases=[]
            //finding countries with the first ever cases
            function SelectNewCases(){

                for (p=0; p<zippedPercDailyChange.length; p++) {

                    if (zippedPercDailyChange[p][1]=="First Case") {

                        newCases.push(zippedPercDailyChange[p][0])

                    }
                    

                }

                

            }
            SelectNewCases()
            //if there is no new country
            if (newCases.length==0) {
                    newCases.push("N/A for today")
                }

            //slice countries with the top five % daily change from top
            let topFive=[]
            function selectTopFive() {
                topFive=zippedPercDailyChange.slice(1,6)
            }
            selectTopFive()

            //put them in a format that will be displayed properly to the user
            var topFiveString="";
            function createString(){
                for (v=0;v<topFive.length;v++){
                    topFiveString+=topFive[v][0]
                    topFiveString+=" "
                    topFiveString+=topFive[v][1]
                    topFiveString+="%  -   "
                }
            }
            createString()
            //console.log(topFiveString)

            //push the values the document
            document.getElementById("firstCases").innerHTML="<b>Países que recientemente anunciaron casos de Coronavirus:</b> "+"</br>"+newCases

            document.getElementById("topFive").innerHTML="<b>Países con la mayor tasa de crecimiento porcentual de casos confirmados %: </b> "+"</br>"+topFiveString


            //zip values from both lists
            var c = confirmedLabels.map(function(e, i) {
                return [e, confirmedValues[i]];
            });
            //sort descending
            c.sort(function(a,b){return b[1]-a[1];});
            //console.log(c)

            //create new lists to separate and store the sorted data
            sortedConfirmedLabels=[];
            sortedConfirmedValues=[];

            function separateValues() {
                for (n = 0; n < c.length; n++) {
                    sortedConfirmedLabels.push(c[n][0])
                }

                for (n = 0; n < c.length; n++) {
                    sortedConfirmedValues.push(c[n][1])
                }
            }

            separateValues()

            //all total confirmed regardless of country
            let worldTotal_Confirmed=0
            function totalGlobal_Confirmed() {
                for (n = 0; n < c.length; n++) {
                    worldTotal_Confirmed+=c[n][1]
            }
            return worldTotal_Confirmed
            }
            totalGlobal_Confirmed()
            
            //splitting the number visually from 1000's
            partsOfValue=[]
            while (worldTotal_Confirmed>1000) {
                worldTotal_Confirmed=worldTotal_Confirmed/1000
                partsOfValue.push(Math.floor(1000*((worldTotal_Confirmed) - Math.floor(worldTotal_Confirmed))))

                if (worldTotal_Confirmed<1000) {
                    partsOfValue.push(Math.floor(1000*(worldTotal_Confirmed/1000)))
                }
                
            }
            partsOfValue.reverse()


           let worldTotal_Confirmed_String="";
           //console.log(partsOfValue.length)
            function stringCreate() {
               for (m=0; m<partsOfValue.length; m++){
                worldTotal_Confirmed_String=worldTotal_Confirmed_String+" "+partsOfValue[m]
                //console.log(worldTotal_Confirmed_String)
           }
           return worldTotal_Confirmed_String
           }
           stringCreate();
          //console.log(worldTotal_Confirmed_String)


           document.getElementById("totalConfirmed").innerHTML="<b>Total de Casos Confirmados:</b> "+worldTotal_Confirmed_String

            //console.log(sortedConfirmedLabels)
            //console.log(sortedConfirmedValues)

            Highcharts.chart('container', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Casos Confirmados de COVID-19'
                },
                subtitle: {
                    text: 'Total de Casos Cornfirmados por País'
                },
                xAxis: {
                    categories: sortedConfirmedLabels,
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Número de Personas',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    valueSuffix: ' '
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                /*legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -40,
                    y: 80,
                    floating: true,
                    borderWidth: 1,
                    backgroundColor:
                        Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
                    shadow: true
                },*/
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Casos Confirmados',
                    data:sortedConfirmedValues,
                    color: '#feb24c'

                }]
            });

        },


    });

    

    //GRAPH, DATA OPERATIONS for deaths
    let worldTotal_Deaths=0
    let deathsLabels=[];
    let deathsValues=[];
    let deathsLabels_OneDayAgo=[];
    let deathsValues_OneDayAgo=[];
    //In order to find total cases in US,China,Canada and Australia
    let totalDeaths_US=0;
    let totalDeaths_China=0;
    let totalDeaths_Canada=0;
    let totalDeaths_Aus=0;
     //in order to find daily % change in deaths 
    let totalDeaths_US_OneDayAgo=0;
    let totalDeaths_China_OneDayAgo=0;
    let totalDeaths_Canada_OneDayAgo=0;
    let totalDeaths_Aus_OneDayAgo=0;
    //putting death cases into array format, into the empty arrays defined above
    Papa.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", {
        download: true,
        complete: function(results) {
            //select the latest column
            let lastCol=results.data[1].length-1;
            let last2Col=results.data[1].length-2;
            //find the row where country name is either "US","China","Canada" or "Australia"
            //and add the corresponding value to the total sum of that country
            for (i=1; i< results.data.length; i++) {
                if (results.data[i][1]=="US"){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalDeaths_US=totalDeaths_US + nmbr
                    totalConfirmed_US_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="China"){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalDeaths_China=totalDeaths_China + nmbr
                    totalDeaths_China_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="Canada"){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalDeaths_Canada=totalDeaths_Canada + nmbr
                    totalConfirmed_Canada_OneDayAgo+=nmbr_OneDayAgo
                }
                else if (results.data[i][1]=="Australia"){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalDeaths_Aus=totalDeaths_Aus + nmbr
                    totalDeaths_Aus_OneDayAgo+=nmbr_OneDayAgo
                }
                //except US,China,Canada and Australia. Push the country name to the labels list
                //and push the corresponding value to the values list
                else if (results.data[i][1]!="US" || results.data[i][1]!="Mainland China"|| results.data[i][1]!="China"
                    || results.data[i][1]!="Canada" || results.data[i][1]!="Australia" ){
                    var nmbr_OneDayAgo=parseInt(results.data[i][last2Col]);
                    var nmbr=parseInt(results.data[i][lastCol]);
                    deathsValues_OneDayAgo.push(nmbr_OneDayAgo);
                    deathsValues.push(nmbr);
                    deathsLabels.push(results.data[i][1])
                }
                else {
                    console.log("ERROR")
                }
            }
            deathsLabels.push("US","China","Canada","Australia");
            deathsValues.push(totalDeaths_US,totalDeaths_China, totalDeaths_Canada, totalDeaths_Aus);
            deathsValues_OneDayAgo.push(totalDeaths_US_OneDayAgo,totalDeaths_China_OneDayAgo,totalDeaths_Canada_OneDayAgo,totalDeaths_Aus_OneDayAgo)
         
/////////////////////////////////////////////////////
            let percentChangeDailyArray=[]
            //calculate daily change compared to data from the day before
            function DailyChange(){
            for (n = 0; n < deathsValues.length; n++) {
                    let perc= Math.round((deathsValues[n]-deathsValues_OneDayAgo[n])*100/deathsValues_OneDayAgo[n])
                    if (perc==Infinity) {
                        percentChangeDailyArray.push("First Death")
                    }
                    else if (Number.isNaN(perc)) {
                        percentChangeDailyArray.push(0)
                    } else {
                        percentChangeDailyArray.push(perc)
                    }
                    }
                }


            DailyChange();


            //console.log(percentChangeDailyArray)

            //zip values from both lists
            var zippedPercDailyChange = deathsLabels.map(function(e, i) {
                return [e, percentChangeDailyArray[i]];
            });
            //sort descending percent change
            zippedPercDailyChange.sort(function(a,b){return b[1]-a[1];});
            //console.log(zippedPercDailyChange)

             let firstDeath=[]
            //finding countries with the first ever cases
            function SelectNewDeath(){

                for (p=0; p<zippedPercDailyChange.length; p++) {

                    if (zippedPercDailyChange[p][1]=="First Death") {

                        firstDeath.push(zippedPercDailyChange[p][0])

                    }
                    

                }

                

            }
            SelectNewDeath()
            //if there is no new country
            if (firstDeath.length==0) {
                    firstDeath.push("N/A")
                }

            //slice countries with the top five % daily change from top
            let topFive=[]
            function selectTopFive() {
                topFive=zippedPercDailyChange.slice(1,6)
            }
            selectTopFive()

            //put them in a format that will be displayed properly to the user
            var topFiveString="";
            function createString(){
                for (v=0;v<topFive.length;v++){
                    topFiveString+=topFive[v][0]
                    topFiveString+=" "
                    topFiveString+=topFive[v][1]
                    topFiveString+="%  -   "
                }
            }
            createString()
            //console.log(topFiveString)

            //push the values the document
            document.getElementById("firstDeath").innerHTML="<b>Países que recientemente han confirmado casos de muerte:</b> "+"</br>"+firstDeath

            document.getElementById("topFiveDeath").innerHTML="<b>Países con la mayor tasa de crecimiento porcentual de muertes %: </b> "+"</br>"+topFiveString
////////////////////////////////////////////////////////////////////////
           

            //zip values from both lists
            var c = deathsLabels.map(function(e, i) {
                return [e, deathsValues[i]];
            });
            //sort descending
            c.sort(function(a,b){return b[1]-a[1];});
            console.log(c)

            //create new lists to separate and store the sorted data
            sortedDeathLabels=[];
            sortedDeathValues=[];

            function separateValues() {
                for (n = 0; n < c.length; n++) {
                   if (c[n][1]!=0){
                    sortedDeathLabels.push(c[n][0])
                   }
                }

                for (n = 0; n < c.length; n++) {
                    if (c[n][1]!=0){
                    sortedDeathValues.push(c[n][1])
                    }
                }
            }

            separateValues()

            //all total confirmed regardless of country
            let worldTotal_Deaths=0
            function totalGlobal_Deaths() {
                for (n = 0; n < c.length; n++) {
                    worldTotal_Deaths+=c[n][1]
            }
            return worldTotal_Deaths
            }
            totalGlobal_Deaths()
            
            //splitting the number visually from 1000's
            partsOfValue=[]
            while (worldTotal_Deaths>1000) {
                worldTotal_Deaths=worldTotal_Deaths/1000
                partsOfValue.push(Math.floor(1000*((worldTotal_Deaths) - Math.floor(worldTotal_Deaths))))

                if (worldTotal_Deaths<1000) {
                    partsOfValue.push(Math.floor(1000*(worldTotal_Deaths/1000)))
                }
                
            }
            partsOfValue.reverse()

            
           let worldTotal_Deaths_String="";
           //console.log(partsOfValue.length)
            function stringCreate() {
               for (m=0; m<partsOfValue.length; m++){
                worldTotal_Deaths_String=worldTotal_Deaths_String+" "+partsOfValue[m]
                
           }
           return worldTotal_Deaths_String
           }

           stringCreate()

            document.getElementById("totalDeath").innerHTML="<b>Total de Muertes:</b> "+worldTotal_Deaths_String

            //console.log(sortedConfirmedLabels)
            //console.log(sortedConfirmedValues)

            Highcharts.chart('container2', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Muertes'
                },
                subtitle: {
                    text: 'Muertes por Países'
                },
                xAxis: {
                    categories: sortedDeathLabels,
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Número de Personas',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    valueSuffix: ' '
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                /*legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -40,
                    y: 80,
                    floating: true,
                    borderWidth: 1,
                    backgroundColor:
                        Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
                    shadow: true
                },*/
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Muertes',
                    data:sortedDeathValues,
                    color:"#fc4e2a"

                }]
            });
                
        },




    });

        //GRAPH, DATA OPERATIONS for recovered
    let worldTotal_Recovered=0
    let recoveredLabels=[];
    let recoveredValues=[];
    //In order to find total cases in US,China,Canada and Australia
    let totalRecovered_US=0;
    let totalRecovered_China=0;
    let totalRecovered_Canada=0;
    let totalRecovered_Aus=0;
    //putting confirmed cases into array format, into the empty arrays defined above
    Papa.parse("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv", {
        download: true,
        complete: function(results) {
            //select the latest column
            let lastCol=results.data[1].length-1;
            //find the row where country name is either "US","China","Canada" or "Australia"
            //and add the corresponding value to the total sum of that country
            for (i=1; i< results.data.length; i++) {
                if (results.data[i][1]=="US"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalRecovered_US=totalRecovered_US + nmbr
                }
                else if (results.data[i][1]=="China"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalRecovered_China=totalRecovered_China + nmbr
                }
                else if (results.data[i][1]=="Canada"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalRecovered_Canada=totalRecovered_Canada + nmbr
                }
                else if (results.data[i][1]=="Australia"){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    totalRecovered_Aus=totalRecovered_Aus + nmbr
                }
                //except US,China,Canada and Australia. Push the country name to the labels list
                //and push the corresponding value to the values list
                else if (results.data[i][1]!="US" || results.data[i][1]!="Mainland China"|| results.data[i][1]!="China"
                    || results.data[i][1]!="Canada" || results.data[i][1]!="Australia" ){
                    var nmbr=parseInt(results.data[i][lastCol]);
                    recoveredValues.push(nmbr);
                    recoveredLabels.push(results.data[i][1])
                }
                else {
                    console.log("ERROR")
                }
            }
            recoveredLabels.push("US","China","Canada","Australia");
            recoveredValues.push(totalRecovered_US,totalRecovered_China, totalRecovered_Canada, totalRecovered_Aus);
            //console.log(confirmedLabels+"\n"+confirmedValues)

            //zip values from both lists
            var c = recoveredLabels.map(function(e, i) {
                return [e, recoveredValues[i]];
            });
            //sort by country names
            c.sort();
            //console.log(c)

            //create new lists to separate and store the sorted data
            sortedRecoveredLabels=[];
            sortedRecoveredValues=[];

            function separateValues() {
                for (n = 0; n < c.length; n++) {
                    sortedRecoveredLabels.push(c[n][0])
                }

                for (n = 0; n < c.length; n++) {
                    sortedRecoveredValues.push(c[n][1])
                }
            }

            separateValues()

            //all total confirmed regardless of country
            let worldTotal_Recovered=0
            function totalGlobal_Recovered() {
                for (n = 0; n < c.length; n++) {
                    worldTotal_Recovered+=c[n][1]
            }
            return worldTotal_Recovered
            }
            totalGlobal_Recovered()
           

            //splitting the number visually from 1000's
            partsOfValue=[]
            while (worldTotal_Recovered>1000) {
                worldTotal_Recovered=worldTotal_Recovered/1000
                partsOfValue.push(Math.floor(1000*((worldTotal_Recovered) - Math.floor(worldTotal_Recovered))))

                if (worldTotal_Recovered<1000) {
                    partsOfValue.push(Math.floor(1000*(worldTotal_Recovered/1000)))
                }
                
            }
            partsOfValue.reverse()


           let worldTotal_Recovered_String="";
           //console.log(partsOfValue.length)
            function stringCreate() {
               for (m=0; m<partsOfValue.length; m++){
                worldTotal_Recovered_String=worldTotal_Recovered_String+" "+partsOfValue[m]
                //console.log(worldTotal_Recovered_String)
           }
           return worldTotal_Recovered_String
           }
           stringCreate();

            document.getElementById("totalRecovered").innerHTML="<b>Total de Recuperados: </b>"+worldTotal_Recovered_String

            //console.log(sortedConfirmedLabels)
            //console.log(sortedConfirmedValues)

           /* Highcharts.chart('container', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Confirmed COVID-19 CASES'
                },
                subtitle: {
                    text: 'Total Confirmed by Countries'
                },
                xAxis: {
                    categories: sortedConfirmedLabels,
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Number of Persons',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    valueSuffix: ' '
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -40,
                    y: 80,
                    floating: true,
                    borderWidth: 1,
                    backgroundColor:
                        Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
                    shadow: true
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Confirmed Cases',
                    data:sortedConfirmedValues

                }]
            });
                */
        },




    });




    };

</script>
</body>
</html>
